# 內積與正交性 (Inner Product and Orthogonality)

> 內積讓我們能測量向量的「長度」和「夾角」——這是正交性的基礎

## 1. 內積的定義

### 標準內積（Dot Product）

對於 ℝⁿ 中的兩個向量 x 和 y：

```
x · y = xᵀy = x₁y₁ + x₂y₂ + ... + xₙyₙ
```

**例子**：
```
x = [1, 2, 3]ᵀ
y = [4, 5, 6]ᵀ

x · y = 1×4 + 2×5 + 3×6 = 4 + 10 + 18 = 32
```

### 內積的性質

| 性質 | 公式 |
|------|------|
| 交換律 | x · y = y · x |
| 分配律 | x · (y + z) = x · y + x · z |
| 純量乘法 | (cx) · y = c(x · y) |
| 正定性 | x · x ≥ 0，且 x · x = 0 ⟺ x = 0 |

---

## 2. 向量長度（範數）

### 定義

向量 x 的長度（或稱範數、模）：

```
‖x‖ = √(x · x) = √(x₁² + x₂² + ... + xₙ²)
```

**例子**：
```
x = [3, 4]ᵀ
‖x‖ = √(3² + 4²) = √(9 + 16) = √25 = 5
```

### 單位向量

長度為 1 的向量稱為單位向量（unit vector）。

將向量正規化（normalize）為單位向量：
```
û = x / ‖x‖
```

**例子**：
```
x = [3, 4]ᵀ
û = [3/5, 4/5]ᵀ = [0.6, 0.8]ᵀ
‖û‖ = √(0.36 + 0.64) = 1 ✓
```

---

## 3. 向量夾角

### 夾角公式

兩向量 x 和 y 的夾角 θ：

```
cos θ = (x · y) / (‖x‖ ‖y‖)
```

**推導**：來自餘弦定理（Law of Cosines）

```
‖x - y‖² = ‖x‖² + ‖y‖² - 2‖x‖‖y‖cos θ
```

### 例子

```
x = [1, 0]ᵀ
y = [1, 1]ᵀ

x · y = 1
‖x‖ = 1
‖y‖ = √2

cos θ = 1 / (1 × √2) = 1/√2
θ = 45° = π/4
```

---

## 4. 正交性（Orthogonality）

### 定義

兩向量正交（orthogonal，或稱垂直）：

```
x ⊥ y  ⟺  x · y = 0
```

### 例子

```
x = [1, 2]ᵀ
y = [-2, 1]ᵀ

x · y = 1×(-2) + 2×1 = -2 + 2 = 0
∴ x ⊥ y
```

### 正交向量組

一組向量 {v₁, v₂, ..., vₖ} 是正交的，若：
```
vᵢ · vⱼ = 0  對所有 i ≠ j
```

### 標準正交向量組（Orthonormal）

正交且每個向量都是單位向量：
```
vᵢ · vⱼ = {1, if i = j
          {0, if i ≠ j
```

簡潔寫法：vᵢ · vⱼ = δᵢⱼ（Kronecker delta）

---

## 5. 正交矩陣（Orthogonal Matrix）

### 定義

方陣 Q 是正交矩陣，若：

```
QᵀQ = QQᵀ = I
```

即 Q⁻¹ = Qᵀ

### 等價條件

- Q 的行向量形成標準正交組
- Q 的列向量形成標準正交組

### 例子：旋轉矩陣

```
    [cos θ  -sin θ]
Q = [sin θ   cos θ]
```

驗證：
```
QᵀQ = [cos θ   sin θ] [cos θ  -sin θ]
      [-sin θ  cos θ] [sin θ   cos θ]

    = [cos²θ + sin²θ    0        ]
      [    0        cos²θ + sin²θ]

    = [1  0]
      [0  1] = I ✓
```

### 正交矩陣的性質

| 性質 | 說明 |
|------|------|
| 保長度 | ‖Qx‖ = ‖x‖ |
| 保內積 | (Qx) · (Qy) = x · y |
| 保夾角 | 夾角不變 |
| det Q = ±1 | +1 是旋轉，-1 是反射 |

**證明 ‖Qx‖ = ‖x‖**：
```
‖Qx‖² = (Qx)ᵀ(Qx) = xᵀQᵀQx = xᵀIx = xᵀx = ‖x‖²
```

---

## 6. 柯西-施瓦茲不等式

### Cauchy-Schwarz Inequality

```
|x · y| ≤ ‖x‖ ‖y‖
```

等號成立 ⟺ x 和 y 線性相依（平行）

### 證明（簡要）

考慮 ‖x - ty‖² ≥ 0（對所有實數 t）：
```
‖x‖² - 2t(x·y) + t²‖y‖² ≥ 0
```
這是 t 的二次式，恆非負 ⟹ 判別式 ≤ 0：
```
4(x·y)² - 4‖x‖²‖y‖² ≤ 0
(x·y)² ≤ ‖x‖²‖y‖²
```

### 應用

- 確保 cos θ = (x·y)/(‖x‖‖y‖) 在 [-1, 1] 範圍內
- 三角不等式的證明基礎

---

## 7. 三角不等式

### Triangle Inequality

```
‖x + y‖ ≤ ‖x‖ + ‖y‖
```

等號成立 ⟺ x 和 y 同方向

### 幾何意義

三角形任一邊的長度不超過另兩邊之和

---

## 8. 正交補空間

### 定義

子空間 S 的正交補（orthogonal complement）：

```
S⊥ = {x : x · s = 0，對所有 s ∈ S}
```

### 性質

```
dim(S) + dim(S⊥) = n
(S⊥)⊥ = S
```

### 與四大子空間的關係

```
C(A)⊥ = N(Aᵀ)
C(Aᵀ)⊥ = N(A)
```

---

## 9. 程式實作

### 本單元程式示範

| 檔案 | 內容 |
|------|------|
| `inner_product_manual.py` | 手刻內積、範數、正交判斷 |
| `inner_product_numpy.py` | 使用 NumPy 實作 |

---

## 10. 考試重點

### 常見題型

1. **計算內積、長度、夾角**
2. **判斷向量是否正交**
3. **正規化向量**
4. **驗證正交矩陣**
5. **證明柯西-施瓦茲不等式的應用**

### 必背公式

```
內積：x · y = x₁y₁ + x₂y₂ + ... + xₙyₙ
長度：‖x‖ = √(x · x)
夾角：cos θ = (x · y) / (‖x‖ ‖y‖)
正交：x ⊥ y ⟺ x · y = 0
正交矩陣：QᵀQ = I
```

### 常見錯誤

- 忘記檢查 Cauchy-Schwarz 不等式中的絕對值
- 混淆「正交」和「標準正交」
- 正交矩陣必須是方陣（非方陣的情況見 QR 分解）

---

## 參考資料

- Strang, Chapter 4.1: Orthogonality of the Four Subspaces
- MIT 18.06 Lecture 14-15
- 3Blue1Brown: Dot products and duality
